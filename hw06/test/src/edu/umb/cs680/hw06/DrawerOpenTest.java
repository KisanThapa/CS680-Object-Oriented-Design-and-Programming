package edu.umb.cs680.hw06;

import static org.junit.jupiter.api.Assertions.assertEquals;
import java.io.ByteArrayOutputStream;
import java.io.PrintStream;
import org.junit.jupiter.api.BeforeEach;
import org.junit.jupiter.api.Test;

public class DrawerOpenTest {
    
    private final ByteArrayOutputStream outStream = new ByteArrayOutputStream();

    @BeforeEach
    public void setUp() {
        System.setOut(new PrintStream(outStream));
    }

    @Test
    public void verifyOpenCloseButtonPushed() {
        DVDPlayer player = DVDPlayer.getInstance();
        DrawerOpen drawerOpen = DrawerOpen.getInstance();
        
        drawerOpen.openCloseButtonPushed();

        assertEquals("DVD Drawer Closed!", outStream.toString().trim());
        assertEquals(player.getState(), DrawerClosedNotPlaying.getInstance());
    }

    @Test
    public void verifyPlayButtonPushed() {
        DVDPlayer player = DVDPlayer.getInstance();
        DrawerOpen drawerOpen = DrawerOpen.getInstance();

        drawerOpen.playButtonPushed();

        assertEquals("DVD Drawer Closed!\nDVD is Playing!", outStream.toString().trim());
        assertEquals(player.getState(), DrawerClosedPlaying.getInstance());

    }
    
    @Test
    public void verifyStopButtonPushed() {
        DVDPlayer player = DVDPlayer.getInstance();
        DrawerOpen drawerOpen = DrawerOpen.getInstance();

        drawerOpen.stopButtonPushed();

        assertEquals("", outStream.toString().trim());
        assertEquals(player.getState(), DrawerClosedPlaying.getInstance());
    }

}
